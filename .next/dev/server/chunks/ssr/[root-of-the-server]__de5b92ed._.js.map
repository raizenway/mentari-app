{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/Banteng%20Harisantoso/Mentari/mentari-app/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatDate(date: Date | string) {\r\n  return new Intl.DateTimeFormat(\"id-ID\", {\r\n    dateStyle: \"long\",\r\n    timeStyle: \"short\",\r\n  }).format(new Date(date));\r\n}\r\n\r\nexport function formatDateShort(date: Date | string) {\r\n  return new Intl.DateTimeFormat(\"id-ID\", {\r\n    day: \"numeric\",\r\n    month: \"short\",\r\n    year: \"numeric\",\r\n  }).format(new Date(date));\r\n}\r\n\r\nexport function formatTime(date: Date | string) {\r\n  return new Intl.DateTimeFormat(\"id-ID\", {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  }).format(new Date(date));\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAEO,SAAS,WAAW,IAAmB;IAC5C,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,WAAW;QACX,WAAW;IACb,GAAG,MAAM,CAAC,IAAI,KAAK;AACrB;AAEO,SAAS,gBAAgB,IAAmB;IACjD,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,KAAK;QACL,OAAO;QACP,MAAM;IACR,GAAG,MAAM,CAAC,IAAI,KAAK;AACrB;AAEO,SAAS,WAAW,IAAmB;IAC5C,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,MAAM;QACN,QAAQ;IACV,GAAG,MAAM,CAAC,IAAI,KAAK;AACrB"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///D:/Banteng%20Harisantoso/Mentari/mentari-app/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-white shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2\",\r\n        sm: \"h-8 rounded-md px-3 text-xs\",\r\n        lg: \"h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///D:/Banteng%20Harisantoso/Mentari/mentari-app/src/app/%28dashboard%29/bank-soal/%5Bid%5D/pdf-viewer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/(dashboard)/bank-soal/[id]/pdf-viewer.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(dashboard)/bank-soal/[id]/pdf-viewer.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAqT,GAClV,mFACA","ignoreList":[0]}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///D:/Banteng%20Harisantoso/Mentari/mentari-app/src/app/%28dashboard%29/bank-soal/%5Bid%5D/pdf-viewer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/(dashboard)/bank-soal/[id]/pdf-viewer.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(dashboard)/bank-soal/[id]/pdf-viewer.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAiS,GAC9T,+DACA","ignoreList":[0]}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///D:/Banteng%20Harisantoso/Mentari/mentari-app/src/app/%28dashboard%29/bank-soal/%5Bid%5D/page.tsx"],"sourcesContent":["import { notFound } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { auth } from \"@/lib/auth\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ArrowLeft, Download } from \"lucide-react\";\r\nimport PDFViewer from \"./pdf-viewer\";\r\n\r\n// R2 signed GET helper\r\nimport { S3Client, GetObjectCommand } from \"@aws-sdk/client-s3\";\r\nimport { getSignedUrl } from \"@aws-sdk/s3-request-presigner\";\r\n\r\ninterface PageProps {\r\n  params: Promise<{ id: string }>;\r\n}\r\n\r\nexport default async function BankSoalDetailPage({ params }: PageProps) {\r\n  const session = await auth();\r\n  const { id } = await params;\r\n\r\n  const bankSoal = await prisma.bankSoal.findUnique({\r\n    where: { id },\r\n    include: {\r\n      category: true,\r\n      uploadedBy: { select: { name: true } },\r\n    },\r\n  });\r\n\r\n  if (!bankSoal) {\r\n    notFound();\r\n  }\r\n\r\n  const canDownload = session?.user.role === \"ADMIN\";\r\n\r\n  // If the file is stored in R2 (we saved the object key in filePublicId),\r\n  // generate a presigned GET URL server-side to allow the PDF viewer to fetch with Range support.\r\n  let fileUrlForViewer = bankSoal.fileUrl;\r\n\r\n  const r2Account = process.env.R2_ACCOUNT_ID;\r\n  const r2Bucket = process.env.R2_BUCKET_NAME;\r\n  const r2AccessKey = process.env.R2_ACCESS_KEY_ID;\r\n  const r2Secret = process.env.R2_SECRET_ACCESS_KEY;\r\n\r\n  if (bankSoal.filePublicId && r2Account && r2Bucket && r2AccessKey && r2Secret) {\r\n    try {\r\n      const s3 = new S3Client({\r\n        region: process.env.R2_REGION || \"auto\",\r\n        endpoint: `https://${r2Account}.r2.cloudflarestorage.com`,\r\n        credentials: { accessKeyId: r2AccessKey, secretAccessKey: r2Secret },\r\n      });\r\n\r\n      const cmd = new GetObjectCommand({ Bucket: r2Bucket, Key: bankSoal.filePublicId });\r\n      const signedGet = await getSignedUrl(s3, cmd, { expiresIn: 60 * 60 }); // 1 hour\r\n      // Use our streaming proxy endpoint to avoid HEAD=403 and ensure proper Accept-Ranges\r\n      fileUrlForViewer = `/api/r2/stream?key=${encodeURIComponent(bankSoal.filePublicId)}`;\r\n    } catch (err) {\r\n      console.error(\"Error creating signed GET for R2:\", err);\r\n      // fallback to stored fileUrl (may or may not be public)\r\n      fileUrlForViewer = bankSoal.fileUrl;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Link href=\"/bank-soal\">\r\n            <Button variant=\"ghost\" size=\"icon\">\r\n              <ArrowLeft className=\"h-5 w-5\" />\r\n            </Button>\r\n          </Link>\r\n          <div>\r\n            <h1 className=\"text-xl font-bold text-gray-900\">{bankSoal.title}</h1>\r\n            <p className=\"text-sm text-gray-500\">\r\n              Kategori: {bankSoal.category.name} â€¢ Diupload oleh:{\" \"}\r\n              {bankSoal.uploadedBy.name}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        {canDownload && (\r\n          <a\r\n            href={fileUrlForViewer}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            download\r\n          >\r\n            <Button variant=\"outline\" className=\"text-black\">\r\n              <Download className=\"mr-2 h-4 w-4\" />\r\n              Download\r\n            </Button>\r\n          </a>\r\n        )}\r\n      </div>\r\n\r\n      {/* PDF Viewer */}\r\n      <div className=\"bg-white rounded-lg border overflow-hidden\">\r\n        <PDFViewer fileUrl={fileUrlForViewer} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA,uBAAuB;AACvB;AACA;;;;;;;;;;;AAMe,eAAe,mBAAmB,EAAE,MAAM,EAAa;IACpE,MAAM,UAAU,MAAM,IAAA,0HAAI;IAC1B,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IAErB,MAAM,WAAW,MAAM,8HAAM,CAAC,QAAQ,CAAC,UAAU,CAAC;QAChD,OAAO;YAAE;QAAG;QACZ,SAAS;YACP,UAAU;YACV,YAAY;gBAAE,QAAQ;oBAAE,MAAM;gBAAK;YAAE;QACvC;IACF;IAEA,IAAI,CAAC,UAAU;QACb,IAAA,iMAAQ;IACV;IAEA,MAAM,cAAc,SAAS,KAAK,SAAS;IAE3C,yEAAyE;IACzE,gGAAgG;IAChG,IAAI,mBAAmB,SAAS,OAAO;IAEvC,MAAM,YAAY,QAAQ,GAAG,CAAC,aAAa;IAC3C,MAAM,WAAW,QAAQ,GAAG,CAAC,cAAc;IAC3C,MAAM,cAAc,QAAQ,GAAG,CAAC,gBAAgB;IAChD,MAAM,WAAW,QAAQ,GAAG,CAAC,oBAAoB;IAEjD,IAAI,SAAS,YAAY,IAAI,aAAa,YAAY,eAAe,UAAU;QAC7E,IAAI;YACF,MAAM,KAAK,IAAI,gOAAQ,CAAC;gBACtB,QAAQ,QAAQ,GAAG,CAAC,SAAS,IAAI;gBACjC,UAAU,CAAC,QAAQ,EAAE,UAAU,yBAAyB,CAAC;gBACzD,aAAa;oBAAE,aAAa;oBAAa,iBAAiB;gBAAS;YACrE;YAEA,MAAM,MAAM,IAAI,wOAAgB,CAAC;gBAAE,QAAQ;gBAAU,KAAK,SAAS,YAAY;YAAC;YAChF,MAAM,YAAY,MAAM,IAAA,wMAAY,EAAC,IAAI,KAAK;gBAAE,WAAW,KAAK;YAAG,IAAI,SAAS;YAChF,qFAAqF;YACrF,mBAAmB,CAAC,mBAAmB,EAAE,mBAAmB,SAAS,YAAY,GAAG;QACtF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,qCAAqC;YACnD,wDAAwD;YACxD,mBAAmB,SAAS,OAAO;QACrC;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,0LAAI;gCAAC,MAAK;0CACT,cAAA,8OAAC,4IAAM;oCAAC,SAAQ;oCAAQ,MAAK;8CAC3B,cAAA,8OAAC,6NAAS;wCAAC,WAAU;;;;;;;;;;;;;;;;0CAGzB,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAmC,SAAS,KAAK;;;;;;kDAC/D,8OAAC;wCAAE,WAAU;;4CAAwB;4CACxB,SAAS,QAAQ,CAAC,IAAI;4CAAC;4CAAkB;4CACnD,SAAS,UAAU,CAAC,IAAI;;;;;;;;;;;;;;;;;;;oBAI9B,6BACC,8OAAC;wBACC,MAAM;wBACN,QAAO;wBACP,KAAI;wBACJ,QAAQ;kCAER,cAAA,8OAAC,4IAAM;4BAAC,SAAQ;4BAAU,WAAU;;8CAClC,8OAAC,sNAAQ;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;;;;;;;;;;;;0BAQ7C,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,kLAAS;oBAAC,SAAS;;;;;;;;;;;;;;;;;AAI5B"}}]
}