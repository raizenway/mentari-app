module.exports=[44477,a=>{"use strict";let b;var c=a.i(87924),d=a.i(72131),e=a.i(50944),f=a.i(95245),g=a.i(59501),h=a.i(15618),i=a.i(96221),j=a.i(14574),k=a.i(99570),l=a.i(66718),m=a.i(70430),n=a.i(29246),o=a.i(56757);let p=o.z.object({title:o.z.string().min(1,"Judul wajib diisi"),description:o.z.string().optional(),scheduledAt:o.z.string().min(1,"Tanggal dan waktu wajib diisi")});o.z.object({title:o.z.string().min(1,"Judul wajib diisi").optional(),description:o.z.string().optional(),scheduledAt:o.z.string().min(1,"Tanggal dan waktu wajib diisi").optional()}).refine(a=>void 0!==a.title||void 0!==a.description||void 0!==a.scheduledAt,{message:"Minimal satu field harus diisi"});var q=a.i(54614);function r(){let a=(0,e.useRouter)(),{toast:b}=(0,q.useToast)(),[o,r]=(0,d.useState)(!1),[s,t]=(0,d.useState)(!1),{register:u,handleSubmit:v,reset:w,formState:{errors:x}}=(0,f.useForm)({resolver:(0,g.zodResolver)(p)}),y=async c=>{t(!0);try{let d=await fetch("/api/schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){let a=await d.json();throw Error(a.error||"Gagal membuat jadwal")}b({title:"Berhasil",description:"Jadwal berhasil dibuat"}),r(!1),w(),a.refresh()}catch(a){console.error("Create schedule error:",a),b({variant:"destructive",title:"Gagal",description:a instanceof Error?a.message:"Terjadi kesalahan"})}finally{t(!1)}};return(0,c.jsxs)(j.Dialog,{open:o,onOpenChange:r,children:[(0,c.jsx)(j.DialogTrigger,{asChild:!0,children:(0,c.jsxs)(k.Button,{className:"bg-biru hover:bg-blue-600",children:[(0,c.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Tambah Jadwal"]})}),(0,c.jsxs)(j.DialogContent,{className:"sm:max-w-[500px] bg-white text-black",children:[(0,c.jsxs)(j.DialogHeader,{children:[(0,c.jsx)(j.DialogTitle,{children:"Tambah Jadwal Baru"}),(0,c.jsx)(j.DialogDescription,{children:"Buat jadwal atau pengumuman baru untuk semua pengguna"})]}),(0,c.jsxs)("form",{onSubmit:v(y),className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(m.Label,{htmlFor:"title",children:"Judul *"}),(0,c.jsx)(l.Input,{id:"title",placeholder:"Contoh: Ujian Tengah Semester",...u("title")}),x.title&&(0,c.jsx)("p",{className:"text-sm text-red-600",children:x.title.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(m.Label,{htmlFor:"description",children:"Deskripsi"}),(0,c.jsx)(n.Textarea,{id:"description",placeholder:"Deskripsi atau detail tambahan...",rows:3,...u("description")}),x.description&&(0,c.jsx)("p",{className:"text-sm text-red-600",children:x.description.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(m.Label,{htmlFor:"scheduledAt",children:"Tanggal dan Waktu *"}),(0,c.jsx)(l.Input,{id:"scheduledAt",type:"datetime-local",...u("scheduledAt")}),x.scheduledAt&&(0,c.jsx)("p",{className:"text-sm text-red-600",children:x.scheduledAt.message})]}),(0,c.jsxs)(j.DialogFooter,{children:[(0,c.jsx)(k.Button,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Batal"}),(0,c.jsx)(k.Button,{type:"submit",disabled:s,className:"bg-biru hover:bg-blue-600",children:s?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):"Simpan"})]})]})]})]})}function s({open:a,onOpenChange:b,scheduleId:e}){let{toast:h}=(0,q.useToast)(),[o,r]=(0,d.useState)(!1),[s,t]=(0,d.useState)(!1),{register:u,handleSubmit:v,reset:w,formState:{errors:x}}=(0,f.useForm)({resolver:(0,g.zodResolver)(p)});(0,d.useEffect)(()=>{a&&e&&y()},[a,e]);let y=async()=>{if(e){t(!0);try{let a=await fetch(`/api/schedules/${e}`);if(!a.ok)throw Error("Gagal memuat jadwal");let b=await a.json(),c=new Date(b.scheduledAt),d=new Date(c.getTime()-6e4*c.getTimezoneOffset()).toISOString().slice(0,16);w({title:b.title,description:b.description||"",scheduledAt:d})}catch(a){console.error("Load schedule error:",a),h({variant:"destructive",title:"Gagal memuat jadwal",description:a instanceof Error?a.message:"Terjadi kesalahan"}),b(!1)}finally{t(!1)}}},z=async a=>{if(e){r(!0);try{let c=await fetch(`/api/schedules/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok){let a=await c.json();throw Error(a.error||"Gagal mengupdate jadwal")}h({title:"Berhasil",description:"Jadwal berhasil diupdate"}),b(!1),window.location.reload()}catch(a){console.error("Update schedule error:",a),h({variant:"destructive",title:"Gagal",description:a instanceof Error?a.message:"Terjadi kesalahan"})}finally{r(!1)}}};return(0,c.jsx)(j.Dialog,{open:a,onOpenChange:b,children:(0,c.jsxs)(j.DialogContent,{className:"sm:max-w-[500px]",children:[(0,c.jsxs)(j.DialogHeader,{children:[(0,c.jsx)(j.DialogTitle,{children:"Edit Jadwal"}),(0,c.jsx)(j.DialogDescription,{children:"Update informasi jadwal atau pengumuman"})]}),s?(0,c.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,c.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin text-biru"})}):(0,c.jsxs)("form",{onSubmit:v(z),className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(m.Label,{htmlFor:"edit-title",children:"Judul *"}),(0,c.jsx)(l.Input,{id:"edit-title",placeholder:"Contoh: Ujian Tengah Semester",...u("title")}),x.title&&(0,c.jsx)("p",{className:"text-sm text-red-600",children:x.title.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(m.Label,{htmlFor:"edit-description",children:"Deskripsi"}),(0,c.jsx)(n.Textarea,{id:"edit-description",placeholder:"Deskripsi atau detail tambahan...",rows:3,...u("description")}),x.description&&(0,c.jsx)("p",{className:"text-sm text-red-600",children:x.description.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(m.Label,{htmlFor:"edit-scheduledAt",children:"Tanggal dan Waktu *"}),(0,c.jsx)(l.Input,{id:"edit-scheduledAt",type:"datetime-local",...u("scheduledAt")}),x.scheduledAt&&(0,c.jsx)("p",{className:"text-sm text-red-600",children:x.scheduledAt.message})]}),(0,c.jsxs)(j.DialogFooter,{children:[(0,c.jsx)(k.Button,{type:"button",variant:"outline",onClick:()=>b(!1),disabled:o,children:"Batal"}),(0,c.jsx)(k.Button,{type:"submit",disabled:o,className:"bg-biru hover:bg-blue-600",children:o?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):"Simpan Perubahan"})]})]})]})})}var t=a.i(41675),u=a.i(41710),v=a.i(79360),w=a.i(24569),x=a.i(81560),y=a.i(91119),z=a.i(86304),A=a.i(35732),B=a.i(68114);function C({id:a,title:b,description:d,scheduledAt:e,isAdmin:f,onEdit:g,onDelete:h}){let i=new Date(e)<new Date;return(0,c.jsxs)(y.Card,{className:"border-biru border-2 hover:shadow-md transition-shadow",children:[(0,c.jsx)(y.CardHeader,{className:"pb-3",children:(0,c.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,c.jsx)("div",{className:"flex-1 min-w-0",children:(0,c.jsx)("h3",{className:"font-semibold text-hitam line-clamp-1",children:b})}),(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,c.jsx)(z.Badge,{variant:i?"secondary":"default",className:i?"":"bg-biru",children:i?"Berlalu":"Mendatang"}),f&&(0,c.jsxs)(A.DropdownMenu,{children:[(0,c.jsx)(A.DropdownMenuTrigger,{asChild:!0,children:(0,c.jsx)(k.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,c.jsx)(v.MoreVertical,{className:"h-4 w-4"})})}),(0,c.jsxs)(A.DropdownMenuContent,{align:"end",children:[(0,c.jsxs)(A.DropdownMenuItem,{onClick:()=>g(a),children:[(0,c.jsx)(w.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,c.jsxs)(A.DropdownMenuItem,{onClick:()=>h(a),className:"text-red-600 focus:text-red-600",children:[(0,c.jsx)(x.Trash2,{className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})]})]})}),(0,c.jsxs)(y.CardContent,{className:"space-y-3",children:[d&&(0,c.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:d}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,c.jsx)(t.Calendar,{className:"h-4 w-4 flex-shrink-0"}),(0,c.jsx)("span",{className:"truncate",children:(0,B.formatDate)(e)})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,c.jsx)(u.Clock,{className:"h-4 w-4 flex-shrink-0"}),(0,c.jsx)("span",{children:(0,B.formatTime)(e)})]})]})]})]})}var D=a.i(75083),E=a.i(87532),F=a.i(70121),G=a.i(97942),H=a.i(7554),I=Symbol("radix.slottable"),J="AlertDialog",[K,L]=function(a,b=[]){let e=[],f=()=>{let b=e.map(a=>d.createContext(a));return function(c){let e=c?.[a]||b;return d.useMemo(()=>({[`__scope${a}`]:{...c,[a]:e}}),[c,e])}};return f.scopeName=a,[function(b,f){let g=d.createContext(f),h=e.length;e=[...e,f];let i=b=>{let{scope:e,children:f,...i}=b,j=e?.[a]?.[h]||g,k=d.useMemo(()=>i,Object.values(i));return(0,c.jsx)(j.Provider,{value:k,children:f})};return i.displayName=b+"Provider",[i,function(c,e){let i=e?.[a]?.[h]||g,j=d.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return d.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return c.scopeName=b.scopeName,c}(f,...b)]}(J,[G.createDialogScope]),M=(0,G.createDialogScope)(),N=a=>{let{__scopeAlertDialog:b,...d}=a,e=M(b);return(0,c.jsx)(G.Root,{...e,...d,modal:!0})};N.displayName=J,d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,c.jsx)(G.Trigger,{...f,...e,ref:b})}).displayName="AlertDialogTrigger";var O=a=>{let{__scopeAlertDialog:b,...d}=a,e=M(b);return(0,c.jsx)(G.Portal,{...e,...d})};O.displayName="AlertDialogPortal";var P=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,c.jsx)(G.Overlay,{...f,...e,ref:b})});P.displayName="AlertDialogOverlay";var Q="AlertDialogContent",[R,S]=K(Q),T=((b=({children:a})=>(0,c.jsx)(c.Fragment,{children:a})).displayName="AlertDialogContent.Slottable",b.__radixId=I,b),U=d.forwardRef((a,b)=>{let{__scopeAlertDialog:e,children:f,...g}=a,h=M(e),i=d.useRef(null),j=(0,F.useComposedRefs)(b,i),k=d.useRef(null);return(0,c.jsx)(G.WarningProvider,{contentName:Q,titleName:V,docsSlug:"alert-dialog",children:(0,c.jsx)(R,{scope:e,cancelRef:k,children:(0,c.jsxs)(G.Content,{role:"alertdialog",...h,...g,ref:j,onOpenAutoFocus:(0,H.composeEventHandlers)(g.onOpenAutoFocus,a=>{a.preventDefault(),k.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,c.jsx)(T,{children:f}),(0,c.jsx)(aa,{contentRef:i})]})})})});U.displayName=Q;var V="AlertDialogTitle",W=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,c.jsx)(G.Title,{...f,...e,ref:b})});W.displayName=V;var X="AlertDialogDescription",Y=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,c.jsx)(G.Description,{...f,...e,ref:b})});Y.displayName=X;var Z=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,c.jsx)(G.Close,{...f,...e,ref:b})});Z.displayName="AlertDialogAction";var $="AlertDialogCancel",_=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:f}=S($,d),g=M(d),h=(0,F.useComposedRefs)(b,f);return(0,c.jsx)(G.Close,{...g,...e,ref:h})});_.displayName=$;var aa=({contentRef:a})=>{let b=`\`${Q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Q}\` by passing a \`${X}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null};let ab=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(P,{className:(0,B.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:d}));ab.displayName=P.displayName;let ac=d.forwardRef(({className:a,...b},d)=>(0,c.jsxs)(O,{children:[(0,c.jsx)(ab,{}),(0,c.jsx)(U,{ref:d,className:(0,B.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));ac.displayName=U.displayName;let ad=({className:a,...b})=>(0,c.jsx)("div",{className:(0,B.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});ad.displayName="AlertDialogHeader";let ae=({className:a,...b})=>(0,c.jsx)("div",{className:(0,B.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});ae.displayName="AlertDialogFooter";let af=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(W,{ref:d,className:(0,B.cn)("text-lg font-semibold text-gray-900",a),...b}));af.displayName=W.displayName;let ag=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(Y,{ref:d,className:(0,B.cn)("text-sm text-gray-600",a),...b}));ag.displayName=Y.displayName;let ah=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(Z,{ref:d,className:(0,B.cn)((0,k.buttonVariants)(),a),...b}));ah.displayName=Z.displayName;let ai=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(_,{ref:d,className:(0,B.cn)((0,k.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));function aj({schedules:a,isAdmin:b,initialTab:f}){let g=(0,e.useRouter)(),{toast:h}=(0,q.useToast)(),[i,j]=(0,d.useState)(f||"all"),[k,m]=(0,d.useState)(""),[n,o]=(0,d.useState)(null),[p,u]=(0,d.useState)(null),[v,w]=(0,d.useState)(!1),y=new Date,z=a.filter(a=>new Date(a.scheduledAt)>=y),A=a.filter(a=>new Date(a.scheduledAt)<y),B=a=>a.filter(a=>a.title.toLowerCase().includes(k.toLowerCase())||a.description&&a.description.toLowerCase().includes(k.toLowerCase())),F=(()=>{switch(i){case"upcoming":return B(z);case"past":return B(A);default:return B(a)}})(),G=async()=>{if(p){w(!0);try{let a=await fetch(`/api/schedules/${p}`,{method:"DELETE"});if(!a.ok){let b=await a.json();throw Error(b.error||"Gagal menghapus jadwal")}h({title:"Berhasil",description:"Jadwal berhasil dihapus"}),u(null),g.refresh()}catch(a){console.error("Delete schedule error:",a),h({variant:"destructive",title:"Gagal",description:a instanceof Error?a.message:"Terjadi kesalahan"})}finally{w(!1)}}};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,c.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,c.jsx)(E.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,c.jsx)(l.Input,{placeholder:"Cari jadwal...",value:k,onChange:a=>m(a.target.value),className:"pl-10"})]}),b&&(0,c.jsx)(r,{})]}),(0,c.jsxs)(D.Tabs,{value:i,onValueChange:j,className:"w-full",children:[(0,c.jsxs)(D.TabsList,{children:[(0,c.jsxs)(D.TabsTrigger,{value:"all",children:["Semua Jadwal (",a.length,")"]}),(0,c.jsxs)(D.TabsTrigger,{value:"upcoming",children:["Mendatang (",z.length,")"]}),(0,c.jsxs)(D.TabsTrigger,{value:"past",children:["Berlalu (",A.length,")"]})]}),(0,c.jsx)(D.TabsContent,{value:i,className:"mt-6",children:0===F.length?(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)(t.Calendar,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,c.jsx)("p",{className:"text-gray-600",children:k?"Tidak ada jadwal yang cocok dengan pencarian":"Belum ada jadwal"})]}):(0,c.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:F.map(a=>(0,c.jsx)(C,{...a,isAdmin:b,onEdit:a=>o(a),onDelete:a=>u(a)},a.id))})})]})]}),n&&(0,c.jsx)(s,{open:!!n,onOpenChange:a=>!a&&o(null),scheduleId:n}),(0,c.jsx)(N,{open:!!p,onOpenChange:()=>u(null),children:(0,c.jsxs)(ac,{children:[(0,c.jsxs)(ad,{children:[(0,c.jsx)(af,{children:"Hapus Jadwal"}),(0,c.jsx)(ag,{children:"Apakah Anda yakin ingin menghapus jadwal ini? Tindakan ini tidak dapat dibatalkan."})]}),(0,c.jsxs)(ae,{children:[(0,c.jsx)(ai,{children:"Batal"}),(0,c.jsx)(ah,{onClick:G,disabled:v,className:"bg-red-600 hover:bg-red-700",children:v?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x.Trash2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menghapus..."]}):"Hapus"})]})]})})]})}ai.displayName=_.displayName,a.s(["ScheduleList",()=>aj],44477)}];

//# sourceMappingURL=src_app_%28dashboard%29_pengumuman_schedule-list_tsx_f01a09d3._.js.map