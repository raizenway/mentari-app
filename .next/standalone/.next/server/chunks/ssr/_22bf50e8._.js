module.exports=[77156,a=>{"use strict";let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},86304,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white shadow hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white shadow hover:bg-yellow-500/80",danger:"border-transparent bg-red-500 text-white shadow hover:bg-red-500/80"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-biru border-2 bg-card text-card-foreground shadow",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col text-[#393939] space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c})).displayName="CardDescription";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));h.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},24569,a=>{"use strict";let b=(0,a.i(70106).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],24569)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},33140,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-primary/10",a),...d})}a.s(["Skeleton",()=>d])},52495,52067,a=>{"use strict";let b=(0,a.i(70106).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],52495);var c=a.i(87924),d=a.i(72131),e=a.i(95245),f=a.i(59501),g=a.i(56757);let h=g.z.object({title:g.z.string().min(1,"Judul sesi wajib diisi").max(100,"Judul maksimal 100 karakter"),description:g.z.string().max(500,"Deskripsi maksimal 500 karakter").optional(),scheduledAt:g.z.string().min(1,"Jadwal wajib diisi"),zoomLink:g.z.string().url("Format link tidak valid").optional().or(g.z.literal("")),zoomMeetingId:g.z.string().optional(),zoomPasscode:g.z.string().optional()});g.z.object({classSessionId:g.z.string().min(1,"Class session ID wajib diisi")});var i=a.i(14574),j=a.i(99570),k=a.i(66718),l=a.i(70430),m=a.i(29246);function n({open:a,onOpenChange:b,onSuccess:g,mode:n="create",initialValues:o=null,sessionId:p}){let[q,r]=(0,d.useState)(!1),[s,t]=(0,d.useState)(""),{register:u,handleSubmit:v,reset:w,formState:{errors:x}}=(0,e.useForm)({resolver:(0,f.zodResolver)(h)});(0,d.useEffect)(()=>{if(!a){w(),t("");return}o&&w({...o,scheduledAt:(a=>{if(!a)return"";let b=new Date(a),c=a=>String(a).padStart(2,"0"),d=b.getFullYear(),e=c(b.getMonth()+1),f=c(b.getDate()),g=c(b.getHours()),h=c(b.getMinutes());return`${d}-${e}-${f}T${g}:${h}`})(o.scheduledAt),zoomLink:o.zoomLink??"",zoomMeetingId:o.zoomMeetingId??"",zoomPasscode:o.zoomPasscode??"",description:o.description??""})},[a,w,o]);let y=async a=>{r(!0),t("");try{let b="edit"===n&&p?`/api/class-sessions/${p}`:"/api/class-sessions",c=await fetch(b,{method:"edit"===n&&p?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,scheduledAt:new Date(a.scheduledAt).toISOString()})});if(!c.ok){let a=await c.json();throw Error(a.error||"Gagal menyimpan sesi")}g()}catch(a){t(a instanceof Error?a.message:"Terjadi kesalahan")}finally{r(!1)}};return(0,c.jsx)(i.Dialog,{open:a,onOpenChange:b,children:(0,c.jsxs)(i.DialogContent,{className:"max-w-md bg-white text-black",children:[(0,c.jsx)(i.DialogHeader,{children:(0,c.jsx)(i.DialogTitle,{children:"edit"===n?"Edit Sesi Kelas":"Tambah Sesi Kelas"})}),(0,c.jsxs)("form",{onSubmit:v(y),className:"space-y-4",children:[s&&(0,c.jsx)("div",{className:"rounded-md bg-destructive/10 p-3 text-sm text-destructive",children:s}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"title",children:"Judul Sesi *"}),(0,c.jsx)(k.Input,{id:"title",placeholder:"Contoh: Sesi Pembahasan Soal Matematika",...u("title")}),x.title&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:x.title.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"description",children:"Deskripsi"}),(0,c.jsx)(m.Textarea,{id:"description",placeholder:"Deskripsi singkat tentang sesi ini...",rows:3,...u("description")}),x.description&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:x.description.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"scheduledAt",children:"Jadwal *"}),(0,c.jsx)(k.Input,{id:"scheduledAt",type:"datetime-local",...u("scheduledAt")}),x.scheduledAt&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:x.scheduledAt.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"zoomLink",children:"Link Zoom"}),(0,c.jsx)(k.Input,{id:"zoomLink",placeholder:"https://zoom.us/j/...",...u("zoomLink")}),x.zoomLink&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:x.zoomLink.message})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"zoomMeetingId",children:"Meeting ID"}),(0,c.jsx)(k.Input,{id:"zoomMeetingId",placeholder:"123 456 7890",...u("zoomMeetingId")})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"zoomPasscode",children:"Passcode"}),(0,c.jsx)(k.Input,{id:"zoomPasscode",placeholder:"abc123",...u("zoomPasscode")})]})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,c.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>b(!1),children:"Batal"}),(0,c.jsx)(j.Button,{type:"submit",disabled:q,children:q?"Menyimpan...":"edit"===n?"Perbarui":"Simpan"})]})]})]})})}a.s(["AddSessionDialog",()=>n],52067)},80175,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(18402),e=a.i(15618),f=a.i(99570),g=a.i(38246),h=a.i(41675),i=a.i(41710),j=a.i(60246),k=a.i(64791),l=a.i(52495),m=a.i(81560),n=a.i(77156),o=a.i(24569),p=a.i(91119),q=a.i(86304),r=a.i(33140),s=a.i(68114);function t({sessions:a,loading:d,onRefresh:e,canManage:t,currentUserId:u,onEdit:v}){let[w,x]=(0,c.useState)(null),y=async a=>{if(confirm("Apakah Anda yakin ingin menghapus sesi ini?")){x(a);try{(await fetch(`/api/class-sessions/${a}`,{method:"DELETE"})).ok&&e()}catch(a){console.error("Error deleting session:",a)}finally{x(null)}}};return d?(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(r.Skeleton,{className:"h-6 w-3/4"}),(0,b.jsx)(r.Skeleton,{className:"h-4 w-1/2"})]}),(0,b.jsxs)(p.CardContent,{children:[(0,b.jsx)(r.Skeleton,{className:"h-4 w-full mb-2"}),(0,b.jsx)(r.Skeleton,{className:"h-4 w-2/3"})]})]},a))}):0===a.length?(0,b.jsx)(p.Card,{children:(0,b.jsxs)(p.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(k.Video,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-medium",children:"Belum ada sesi kelas"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Sesi kelas yang dijadwalkan akan muncul di sini"})]})}):(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(a=>{let c,d;return(0,b.jsxs)(p.Card,{className:"flex flex-col",children:[(0,b.jsx)(p.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold line-clamp-1",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["oleh ",a.createdBy.name]})]}),(c=new Date(a.scheduledAt),d=new Date,c.toDateString()===d.toDateString())?(0,b.jsx)(q.Badge,{className:"bg-green-500",children:"Hari Ini"}):new Date(a.scheduledAt)>new Date?(0,b.jsx)(q.Badge,{variant:"outline",children:"Mendatang"}):(0,b.jsx)(q.Badge,{variant:"secondary",children:"Selesai"})]})}),(0,b.jsxs)(p.CardContent,{className:"flex-1 space-y-3",children:[a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(h.Calendar,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:(0,s.formatDate)(a.scheduledAt)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(i.Clock,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:new Date(a.scheduledAt).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(j.Users,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[a._count.attendances," peserta hadir"]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"flex-1 text-hitam",asChild:!0,children:(0,b.jsxs)(g.default,{href:`/sesi-kelas/${a.id}`,children:[(0,b.jsx)(n.Eye,{className:"mr-1 h-3 w-3"}),"Detail"]})}),a.zoomLink&&(0,b.jsxs)(f.Button,{size:"sm",className:"flex-1 text-white bg-biru",onClick:()=>window.open(a.zoomLink,"_blank"),children:[(0,b.jsx)(l.ExternalLink,{className:"mr-1 h-3 w-3"}),"Join Zoom"]})]}),t&&(0,b.jsxs)("div",{className:"flex gap-2 pt-1",children:[(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"flex-1",onClick:()=>v?.(a.id),children:[(0,b.jsx)(o.Edit,{className:"mr-1 h-3 w-3"}),"Edit"]}),(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"flex-1 text-destructive hover:text-destructive",onClick:()=>y(a.id),disabled:w===a.id,children:[(0,b.jsx)(m.Trash2,{className:"mr-1 h-3 w-3"}),w===a.id?"Menghapus...":"Hapus"]})]})]})]},a.id)})})}var u=a.i(52067);function v(){let{data:a}=(0,d.useSession)(),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),q=a?.user?.role==="ADMIN"||a?.user?.role==="PENGAJAR",r=async()=>{try{let a=await fetch("/api/class-sessions");if(a.ok){let b=await a.json();h(b)}}catch(a){console.error("Error fetching sessions:",a)}finally{j(!1)}},s=async a=>{try{let b=await fetch(`/api/class-sessions/${a}`);if(b.ok){let c=await b.json();p({title:c.title,description:c.description??"",scheduledAt:c.scheduledAt,zoomLink:c.zoomLink??"",zoomMeetingId:c.zoomMeetingId??"",zoomPasscode:c.zoomPasscode??""}),n(a),l(!0)}}catch(a){console.error("Error fetching session for edit:",a)}};return(0,c.useEffect)(()=>{r()},[]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-black",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-hitam",children:"Sesi Kelas"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Kelola jadwal sesi kelas dan link Zoom meeting"})]}),q&&(0,b.jsxs)(f.Button,{onClick:()=>l(!0),className:"bg-amber-300 hover:bg-amber-400",children:[(0,b.jsx)(e.Plus,{className:"mr-2 h-4 w-4"}),"Tambah Sesi"]})]}),(0,b.jsx)(t,{sessions:g,loading:i,onRefresh:r,canManage:q,currentUserId:a?.user?.id,onEdit:s}),(0,b.jsx)(u.AddSessionDialog,{open:k,onOpenChange:a=>{l(a),a||(n(null),p(null))},onSuccess:()=>{l(!1),n(null),p(null),r()},mode:m?"edit":"create",sessionId:m??void 0,initialValues:o})]})}a.s(["default",()=>v],80175)}];

//# sourceMappingURL=_22bf50e8._.js.map