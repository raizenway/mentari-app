module.exports=[96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},77156,a=>{"use strict";let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},8005,a=>{"use strict";var b=a.i(56757);let c=b.z.object({name:b.z.string().min(1,"Nama kategori harus diisi").min(2,"Nama kategori minimal 2 karakter"),description:b.z.string().optional()}),d=b.z.object({title:b.z.string().min(1,"Judul harus diisi").min(2,"Judul minimal 2 karakter"),description:b.z.string().optional(),categoryId:b.z.string().min(1,"Kategori harus dipilih"),fileUrl:b.z.string().min(1,"File harus diupload"),filePublicId:b.z.string().optional()});a.s(["bankSoalCategorySchema",0,c,"bankSoalSchema",0,d])},92596,a=>{"use strict";let b=(0,a.i(70106).default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);a.s(["Folder",()=>b],92596)},91686,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(91119),g=a.i(99570),h=a.i(86304),i=a.i(66718),j=a.i(35732),k=a.i(4720),l=a.i(87532),m=a.i(79360),n=a.i(77156);let o=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var p=a.i(81560),q=a.i(92596),r=a.i(80701),s=a.i(68114),t=a.i(54614);function u({bankSoals:a,categories:u,canManage:v,canDownload:w,initialCategory:x=null}){let y=(0,d.useRouter)(),{toast:z}=(0,t.useToast)(),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(x??null),[E,F]=(0,c.useState)(null);(0,c.useEffect)(()=>{D(x??null)},[x]);let G=a.filter(a=>{let b=a.title.toLowerCase().includes(A.toLowerCase())||a.category.name.toLowerCase().includes(A.toLowerCase()),c=!C||a.category.id===C;return b&&c}),H=async a=>{if(confirm("Apakah Anda yakin ingin menghapus file ini?")){F(a);try{if(!(await fetch(`/api/bank-soal/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete");z({title:"Berhasil",description:"File bank soal telah dihapus",variant:"success"}),y.refresh()}catch(a){z({title:"Error",description:"Gagal menghapus file",variant:"destructive"})}finally{F(null)}}};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-black"}),(0,b.jsx)(i.Input,{placeholder:"Cari bank soal...",value:A,onChange:a=>B(a.target.value),className:"pl-10 text-black"})]}),(0,b.jsx)("div",{className:"sm:w-64",children:(0,b.jsxs)(r.Select,{value:C??"all",onValueChange:a=>D("all"===a?null:a),children:[(0,b.jsx)(r.SelectTrigger,{className:"bg-white text-black",children:(0,b.jsx)(r.SelectValue,{placeholder:"Pilih kategori"})}),(0,b.jsxs)(r.SelectContent,{className:"bg-white text-black",children:[(0,b.jsx)(r.SelectItem,{value:"all",children:"Semua Kategori"}),u.map(a=>(0,b.jsx)(r.SelectItem,{value:a.id,children:a.name},a.id))]})]})})]}),0===G.length?(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(k.FileText,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:A?"Tidak ada file yang cocok dengan pencarian":"Belum ada file bank soal"})]})}):(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:G.map(a=>(0,b.jsx)(f.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(f.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-red-100",children:(0,b.jsx)(k.FileText,{className:"h-5 w-5 text-red-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:(0,b.jsx)(e.default,{href:`/bank-soal/${a.id}`,className:"hover:underline",children:a.title})}),(0,b.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,b.jsxs)(h.Badge,{variant:"secondary",className:"text-xs text-gray-600",children:[(0,b.jsx)(q.Folder,{className:"h-3 w-3 mr-1"}),a.category.name]})}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-2 line-clamp-2",children:a.description}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:[a.uploadedBy.name," â€¢ ",(0,s.formatDateShort)(a.createdAt)]})]})]}),(0,b.jsxs)(j.DropdownMenu,{children:[(0,b.jsx)(j.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"shrink-0",children:(0,b.jsx)(m.MoreVertical,{className:"h-4 w-4 text-biru"})})}),(0,b.jsxs)(j.DropdownMenuContent,{align:"end",className:"bg-white text-black",children:[(0,b.jsx)(j.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(e.default,{href:`/bank-soal/${a.id}`,children:[(0,b.jsx)(n.Eye,{className:"mr-2 h-4 w-4 "}),"Lihat File"]})}),w&&(0,b.jsx)(j.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)("a",{href:a.fileUrl,target:"_blank",rel:"noopener noreferrer",download:!0,children:[(0,b.jsx)(o,{className:"mr-2 h-4 w-4"}),"Download"]})}),v&&(0,b.jsxs)(j.DropdownMenuItem,{onClick:()=>H(a.id),disabled:E===a.id,className:"text-red-600",children:[(0,b.jsx)(p.Trash2,{className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})]})})},a.id))})]})}a.s(["default",()=>u],91686)},16945,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(35732),i=a.i(92596),j=a.i(79360),k=a.i(81560),l=a.i(54614);function m({categories:a,canManage:m}){let n=(0,d.useRouter)(),{toast:o}=(0,l.useToast)(),[p,q]=(0,c.useState)(null),r=async(a,b,c)=>{if(c>0)return void o({title:"Tidak dapat menghapus",description:`Kategori "${b}" masih memiliki ${c} file. Hapus semua file terlebih dahulu.`,variant:"destructive"});if(confirm(`Apakah Anda yakin ingin menghapus kategori "${b}"?`)){q(a);try{if(!(await fetch(`/api/categories/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete");o({title:"Berhasil",description:"Kategori telah dihapus",variant:"success"}),n.refresh()}catch(a){o({title:"Error",description:"Gagal menghapus kategori",variant:"destructive"})}finally{q(null)}}};return 0===a.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(i.Folder,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Belum ada kategori"})]})}):(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(a=>(0,b.jsx)(e.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1 cursor-pointer hover:bg-gray-50 p-2 rounded",role:"button",tabIndex:0,onClick:()=>n.push(`/bank-soal?categoryId=${a.id}&tab=files`),onKeyDown:b=>{("Enter"===b.key||" "===b.key)&&n.push(`/bank-soal?categoryId=${a.id}&tab=files`)},children:[(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-amber-100",children:(0,b.jsx)(i.Folder,{className:"h-5 w-5 text-amber-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:a.description}),(0,b.jsxs)(g.Badge,{variant:"secondary",className:"mt-2",children:[a._count.bankSoals," file"]})]})]}),m&&(0,b.jsxs)(h.DropdownMenu,{children:[(0,b.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"shrink-0",children:(0,b.jsx)(j.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsx)(h.DropdownMenuContent,{align:"end",children:(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>r(a.id,a.name,a._count.bankSoals),disabled:p===a.id,className:"text-red-600",children:[(0,b.jsx)(k.Trash2,{className:"mr-2 h-4 w-4"}),"Hapus"]})})]})]})})},a.id))})}a.s(["default",()=>m])},8489,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(95245),f=a.i(59501),g=a.i(15618),h=a.i(96221),i=a.i(14574),j=a.i(99570),k=a.i(66718),l=a.i(70430),m=a.i(29246),n=a.i(8005),o=a.i(54614);function p(){let a=(0,d.useRouter)(),{toast:p}=(0,o.useToast)(),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),{register:u,handleSubmit:v,reset:w,formState:{errors:x}}=(0,e.useForm)({resolver:(0,f.zodResolver)(n.bankSoalCategorySchema)}),y=async b=>{t(!0);try{let c=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();if(!c.ok)throw Error(d.error||"Gagal menambahkan kategori");p({title:"Berhasil",description:"Kategori baru telah ditambahkan",variant:"success"}),w(),r(!1),a.refresh()}catch(a){p({title:"Error",description:a.message,variant:"destructive"})}finally{t(!1)}};return(0,b.jsxs)(i.Dialog,{open:q,onOpenChange:r,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(j.Button,{variant:"outline",className:"text-black bg-white hover:bg-gray-100",children:[(0,b.jsx)(g.Plus,{className:"mr-2 h-4 w-4"}),"Kategori Baru"]})}),(0,b.jsxs)(i.DialogContent,{className:"bg-white text-black",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{children:"Tambah Kategori Baru"})}),(0,b.jsxs)("form",{onSubmit:v(y),className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"name",children:"Nama Kategori"}),(0,b.jsx)(k.Input,{id:"name",...u("name"),placeholder:"Contoh: Matematika Dasar",disabled:s}),x.name&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:x.name.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"description",children:"Deskripsi (Opsional)"}),(0,b.jsx)(m.Textarea,{id:"description",...u("description"),placeholder:"Deskripsi kategori",disabled:s})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:s,children:"Batal"}),(0,b.jsx)(j.Button,{type:"submit",className:"bg-amber-500 hover:bg-amber-600",disabled:s,children:s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):"Simpan"})]})]})]})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=_936a15f9._.js.map