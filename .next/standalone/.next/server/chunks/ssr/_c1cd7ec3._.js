module.exports=[29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-biru border-2 bg-card text-card-foreground shadow",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col text-[#393939] space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c})).displayName="CardDescription";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));h.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},33140,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-primary/10",a),...d})}a.s(["Skeleton",()=>d])},52495,52067,a=>{"use strict";let b=(0,a.i(70106).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],52495);var c=a.i(87924),d=a.i(72131),e=a.i(95245),f=a.i(59501),g=a.i(56757);let h=g.z.object({title:g.z.string().min(1,"Judul sesi wajib diisi").max(100,"Judul maksimal 100 karakter"),description:g.z.string().max(500,"Deskripsi maksimal 500 karakter").optional(),scheduledAt:g.z.string().min(1,"Jadwal wajib diisi"),zoomLink:g.z.string().url("Format link tidak valid").optional().or(g.z.literal("")),zoomMeetingId:g.z.string().optional(),zoomPasscode:g.z.string().optional()});g.z.object({classSessionId:g.z.string().min(1,"Class session ID wajib diisi")});var i=a.i(14574),j=a.i(99570),k=a.i(66718),l=a.i(70430),m=a.i(29246);function n({open:a,onOpenChange:b,onSuccess:g,mode:n="create",initialValues:o=null,sessionId:p}){let[q,r]=(0,d.useState)(!1),[s,t]=(0,d.useState)(""),{register:u,handleSubmit:v,reset:w,formState:{errors:x}}=(0,e.useForm)({resolver:(0,f.zodResolver)(h)});(0,d.useEffect)(()=>{if(!a){w(),t("");return}o&&w({...o,scheduledAt:(a=>{if(!a)return"";let b=new Date(a),c=a=>String(a).padStart(2,"0"),d=b.getFullYear(),e=c(b.getMonth()+1),f=c(b.getDate()),g=c(b.getHours()),h=c(b.getMinutes());return`${d}-${e}-${f}T${g}:${h}`})(o.scheduledAt),zoomLink:o.zoomLink??"",zoomMeetingId:o.zoomMeetingId??"",zoomPasscode:o.zoomPasscode??"",description:o.description??""})},[a,w,o]);let y=async a=>{r(!0),t("");try{let b="edit"===n&&p?`/api/class-sessions/${p}`:"/api/class-sessions",c=await fetch(b,{method:"edit"===n&&p?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,scheduledAt:new Date(a.scheduledAt).toISOString()})});if(!c.ok){let a=await c.json();throw Error(a.error||"Gagal menyimpan sesi")}g()}catch(a){t(a instanceof Error?a.message:"Terjadi kesalahan")}finally{r(!1)}};return(0,c.jsx)(i.Dialog,{open:a,onOpenChange:b,children:(0,c.jsxs)(i.DialogContent,{className:"max-w-md bg-white text-black",children:[(0,c.jsx)(i.DialogHeader,{children:(0,c.jsx)(i.DialogTitle,{children:"edit"===n?"Edit Sesi Kelas":"Tambah Sesi Kelas"})}),(0,c.jsxs)("form",{onSubmit:v(y),className:"space-y-4",children:[s&&(0,c.jsx)("div",{className:"rounded-md bg-destructive/10 p-3 text-sm text-destructive",children:s}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"title",children:"Judul Sesi *"}),(0,c.jsx)(k.Input,{id:"title",placeholder:"Contoh: Sesi Pembahasan Soal Matematika",...u("title")}),x.title&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:x.title.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"description",children:"Deskripsi"}),(0,c.jsx)(m.Textarea,{id:"description",placeholder:"Deskripsi singkat tentang sesi ini...",rows:3,...u("description")}),x.description&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:x.description.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"scheduledAt",children:"Jadwal *"}),(0,c.jsx)(k.Input,{id:"scheduledAt",type:"datetime-local",...u("scheduledAt")}),x.scheduledAt&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:x.scheduledAt.message})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"zoomLink",children:"Link Zoom"}),(0,c.jsx)(k.Input,{id:"zoomLink",placeholder:"https://zoom.us/j/...",...u("zoomLink")}),x.zoomLink&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:x.zoomLink.message})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"zoomMeetingId",children:"Meeting ID"}),(0,c.jsx)(k.Input,{id:"zoomMeetingId",placeholder:"123 456 7890",...u("zoomMeetingId")})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(l.Label,{htmlFor:"zoomPasscode",children:"Passcode"}),(0,c.jsx)(k.Input,{id:"zoomPasscode",placeholder:"abc123",...u("zoomPasscode")})]})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,c.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>b(!1),children:"Batal"}),(0,c.jsx)(j.Button,{type:"submit",disabled:q,children:q?"Menyimpan...":"edit"===n?"Perbarui":"Simpan"})]})]})]})})}a.s(["AddSessionDialog",()=>n],52067)},6221,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(18402),e=a.i(38246),f=a.i(70106);let g=(0,f.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var h=a.i(41675),i=a.i(41710),j=a.i(64791),k=a.i(52495);let l=(0,f.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var m=a.i(33441);let n=(0,f.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var o=a.i(99570),p=a.i(52067),q=a.i(91119),r=a.i(33140),s=a.i(68114);function t({params:a}){let{id:f}=(0,c.use)(a),{data:t}=(0,d.useSession)(),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1);t?.user?.role;let E=t?.user?.role==="ADMIN"||t?.user?.role==="PENGAJAR";u?.attendances.some(a=>a.student.id===t?.user?.id);let F=async()=>{try{let a=await fetch(`/api/class-sessions/${f}`);if(a.ok){let b=await a.json();v(b)}}catch(a){console.error("Error fetching session:",a)}finally{x(!1)}};(0,c.useEffect)(()=>{F()},[f]);let G=(a,b)=>{navigator.clipboard.writeText(a),B(b),setTimeout(()=>B(null),2e3)};return w?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(r.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(r.Skeleton,{className:"h-64 w-full"})]}):u?(0,b.jsxs)("div",{className:"space-y-6 text-black",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"bg-biru",asChild:!0,children:(0,b.jsx)(e.default,{href:"/sesi-kelas",children:(0,b.jsx)(g,{className:"h-5 w-5 text-white"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:u.title}),(0,b.jsxs)("p",{className:"inline-flex text-black bg-kuning px-2 rounded-lg mt-1",children:["oleh ",u.createdBy.name]})]})]}),E&&(0,b.jsx)(o.Button,{onClick:()=>D(!0),className:"bg-amber-300 hover:bg-amber-400",children:"Edit"})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 text-black",children:[(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{className:"inline-flex",children:(0,b.jsxs)(q.CardTitle,{className:"flex gap-2 items-center text-lg",children:[(0,b.jsx)(n,{className:"h-5 w-5"}),"Informasi Sesi"]})}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[u.description&&(0,b.jsx)("p",{className:"text-muted-foreground",children:u.description}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Calendar,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsx)("span",{children:(0,s.formatDate)(u.scheduledAt)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(i.Clock,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("span",{children:[new Date(u.scheduledAt).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})," WIB"]})]})]})]})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{children:(0,b.jsxs)(q.CardTitle,{className:"flex gap-2 items-center text-lg",children:[(0,b.jsx)(j.Video,{className:"h-5 w-5"}),"Zoom Meeting"]})}),(0,b.jsx)(q.CardContent,{className:"space-y-4",children:u.zoomLink?(0,b.jsxs)(b.Fragment,{children:[u.zoomMeetingId&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Meeting ID"}),(0,b.jsx)("p",{className:"font-mono",children:u.zoomMeetingId})]}),(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>G(u.zoomMeetingId,"meetingId"),children:"meetingId"===A?(0,b.jsx)(m.Check,{className:"h-4 w-4 text-green-500"}):(0,b.jsx)(l,{className:"h-4 w-4"})})]}),u.zoomPasscode&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Passcode"}),(0,b.jsx)("p",{className:"font-mono",children:u.zoomPasscode})]}),(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>G(u.zoomPasscode,"passcode"),children:"passcode"===A?(0,b.jsx)(m.Check,{className:"h-4 w-4 text-green-500"}):(0,b.jsx)(l,{className:"h-4 w-4"})})]}),(0,b.jsxs)(o.Button,{className:"w-full bg-kuning",onClick:()=>window.open(u.zoomLink,"_blank"),children:[(0,b.jsx)(k.ExternalLink,{className:"mr-2 h-4 w-4"}),"Join Meeting"]})]}):(0,b.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Link Zoom belum tersedia"})})]})]}),(0,b.jsx)(p.AddSessionDialog,{open:C,onOpenChange:a=>D(a),onSuccess:()=>{D(!1),F()},mode:"edit",sessionId:u.id,initialValues:{title:u.title,description:u.description??"",scheduledAt:u.scheduledAt,zoomLink:u.zoomLink??"",zoomMeetingId:u.zoomMeetingId??"",zoomPasscode:u.zoomPasscode??""}})]}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Sesi kelas tidak ditemukan"}),(0,b.jsx)(o.Button,{asChild:!0,className:"mt-4",children:(0,b.jsx)(e.default,{href:"/sesi-kelas",children:"Kembali"})})]})}a.s(["default",()=>t],6221)}];

//# sourceMappingURL=_c1cd7ec3._.js.map